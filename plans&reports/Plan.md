# План внедрения автоматизации тестирования комплексного сервиса, взаимодействующего с СУБД и API банка.

![главная страница](pictures/service.png)

Приложение предлагает купить тур по определённой цене двумя способами:

1. Обычная оплата по дебетовой карте.
2. Уникальная технология: выдача кредита по данным банковской карты.

Приложение в собственной СУБД должно сохранять информацию о том, успешно ли был совершён платёж и каким способом.

СУБД:

* MySQL;
* PostgreSQL.

## Перечень автоматизируемых сценариев:

### Валидные данные для заполнения полей информации о карте:

* **НОМЕР КАРТЫ** - состоит из 16 цифр. Предложено два варианта обрабатываемых карт:

1. APPROVED карта - 1111 2222 3333 4444;
2. DECLINED карта - 5555 6666 7777 8888.

* **МЕСЯЦ** - двухзначное число от 01 до 12 включительно, не менее текущего месяца текущего года;
* **ГОД** - двухзначное число, не превышающие 5 лет и не менее текущего года;
* **ВЛАДЕЛЕЦ** - значение на латинице, не более 69 символов;
* **CVC/CVV** - трехзначное число от 000 до 999 включительно.

### Для всех сценариев:

1. Запущено приложение с одной из СУБД;
2. Открыта страница http://localhost:8080/

### Варианты покупки:

#### По дебетовой карте:

1. Нажать кнопку "Купить"

* **Ожидаемый результат:** откроется форма для заполнения информации о карте.

#### Выдача кредита по данным банковской карты:

1. Нажать кнопку "Купить в кредит"

* **Ожидаемый результат:** откроется форма для заполнения информации о карте.

#### Далее сценарии идентичны для обоих вариантов

### Позитивные сценарии покупки:

#### №1

1. В поле "Номер карты" ввести значение APPROVED карты - 1111 2222 3333 4444
2. В поле "Месяц" ввести значение текущего месяца
3. В поле "Год" ввести значение текущего года
4. Остальные поля заполнить валидными значениями
5. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется всплывающее окно с сообщением об успешной операции - "Успешно" "Операция одобрена
  Банком.". В БД появилась запись со статусом карты - APPROVED. Сумма покупки в БД соответствует сумме на странице.

#### №2

1. В поле "Номер карты" ввести значение DECLINED карты - 5555 6666 7777 8888
2. В поле "Месяц" ввести значение текущего месяца
3. В поле "Год" ввести значение текущего года
4. Остальные поля заполнить валидными значениями
5. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется всплывающее окно с сообщением о неуспешной операции - "Ошибка" "Ошибка! Банк
  отказал в проведении операции". В БД появилась запись со статусом карты - DECLINED. Сумма покупки в БД соответствует
  сумме на странице.

### Ввод невалидных данных в поле "Номер карты"

#### №1

1. В поле "Номер карты" ввести значение из 15 цифр - 1111 2222 3333 444
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №2

1. В поле "Номер карты" ввести значение из 17 цифр - 1111 2222 3333 4444 5

* **Ожидаемый результат:** поле не заполняется последне цифрой - 5

#### №3

1. В поле "Номер карты" ввести значение на латинице и из спецсимволов - @#$%&*volf

* **Ожидаемый результат:** поле не заполняется.

#### №4

1. В поле "Номер карты" ввести рандомный номер из 16 цифр
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется всплывающее окно с сообщением о неуспешной операции - "Ошибка" "Ошибка! Банк
  отказал в проведении операции". В БД запись не появляется.

### Ввод невалидных данных в поле "Месяц"

#### №1

1. В поле "Месяц" ввести значение из одной цифры
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №2

1. В поле "Месяц" ввести значение прошлого от текущего месяца
2. В поле "Год" ввести значение текущего года
3. Остальные поля заполнить валидными значениями
4. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Истёк срок действия карты". В БД запись не
  появляется.

#### №3

1. В поле "Месяц" ввести значение - 00
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверно указан срок действия карты". В БД
  запись не появляется.

#### №4

1. В поле "Месяц" ввести значение - 13
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверно указан срок действия карты". В БД
  запись не появляется.

#### №5

1. В поле "Месяц" ввести значение из трех цифр - 123

* **Ожидаемый результат:** поле не заполняется третьей цифрой - 3.

#### №6

1. В поле "Месяц" ввести значение из спецсимволов и на латинице - @#$%&*volf

* **Ожидаемый результат:** поле не заполняется.

### Ввод невалидных данных в поле "Год"

#### №1

1. В поле "Год" ввести значение прошлого года
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Истёк срок действия карты". В БД запись не
  появляется.

#### №2

1. В поле "Год" ввести значение 6 лет вперед от текущего года
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверно указан срок действия карты". В БД
  запись не появляется.

#### №3

1. В поле "Год" ввести значение из трех цифр - 123

* **Ожидаемый результат:** поле не заполняется третьей цифрой - 3.

#### №4

1. В поле "Год" ввести значение из одной цифры - 1
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №5

1. В поле "Год" ввести значение из спецсимволов и на латинице - @#$%&*volf

* **Ожидаемый результат:** поле не заполняется.

### Ввод невалидных данных в поле "Владелец"

#### №1

1. В поле "Владелец" ввести значение на кириллице
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №2

1. В поле "Владелец" ввести значение из цифр -123
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №3

1. В поле "Владелец" ввести значение из спецсимволов - @#$%&*
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №4

1. В поле "Владелец" ввести значение на латинице из 70ти символов
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле. В БД запись не появляется.

### Ввод невалидных данных в поле "CVC/CVV"

#### №1

1. В поле "CVC/CVV" ввести значение из двух цифр - 12
2. Остальные поля заполнить валидными значениями
3. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненном поле - "Неверный формат". В БД запись не
  появляется.

#### №2

1. В поле "CVC/CVV" ввести значение из трех цифр - 123
2. * **Ожидаемый результат:** поле не заполняется третьей цифрой - 3.

#### №3

1. В поле "CVC/CVV" ввести значение из спецсимволов и на латинице - @#$%&*volf

* **Ожидаемый результат:** поле не заполняется.

### Оставление пустого поля при отправке

#### №1

1. Оставить все поля незаполненным
2. Нажать кнопку "Продолжить"

* **Ожидаемый результат:** появляется сообщение о неверно заполненных полях - "Поле обязательно для заполнения". В БД
  запись не появляется.

### Закрытие всплывающего окна с информацией об успешности операции

#### №1

1. Заполнить все поля валидными данными
2. Нажать кнопку "Продолжить"
3. Нажать кнопку "Х" во всплывающем окне

* **Ожидаемый результат:** всплывающее окно скрывается

## Перечень используемых инструментов:

* IntelliJ IDEA - инструмент для написания и редактирования кода
* Java - язык программирования для написания авто-тестов
* Gradle - сборка проекта
* Selenide - для тестирования UI
* Faker - для генерации данных
* DBUtils - для взаимодействия с базой данных
* Lombok - для удобства написания кода
* Allure - для формирования отчетов
* Git и GitHub - контроль версий
* Docker - для создания контейнера СУБД

## Перечень и описание возможных рисков при автоматизации:

* Нет подробного ТЗ
* В HTML нет уникальных локаторов для поиска элементов на страницах приложения
* Многостраничное приложение, что затрудняет процесс написания авто-тестов
* Сложности с подключением и настройкой СУБД

## Интервальная оценка с учётом рисков в часах:

* 80 часов

## План сдачи работ:

* 18.07.23 - проведение авто-тестов
* 21.07.23 - результаты авто-тестов и отчёт по автоматизации
